<!-- Before / After Split Section -->
<section class="before-after">
  <div class="before-after__inner">
    <!-- LEFT IMAGE (Before) -->
    <div class="before-after__image before">
      <img src="images/F3.jpg" alt="Before design">
    </div>

    <!-- RIGHT IMAGE (After) -->
    <div class="before-after__image after">
      <img src="images/F4.jpg" alt="After design">
    </div>

    <!-- SPLIT CURSOR (DRAG HANDLE) -->
    <split-cursor class="before-after__cursor">
      <span class="sr-only">Drag</span>
      <svg role="presentation" focusable="false" width="28" height="35" viewBox="0 0 32 40">
        <path d="M16 0C7.16344 0 0 7.16344 0 16V24C0 32.8366 7.16344 40 16 40C24.8366 40 32 32.8366 32 24V16C32 7.16344 24.8366 0 16 0Z" fill="#ffffff"></path>
        <path fill="#000000" d="M11 14H13V26H11zM15 14H17V26H15zM19 14H21V26H19z"></path>
      </svg>
    </split-cursor>
  </div>
</section>

<style>

    /* Before / After Split Section */
.before-after {
  --position: 50%;            /* starting center */
  padding: 4rem 0;
  display: flex;
  justify-content: center;
}

.before-after__inner {
  position: relative;
  max-width: 1100px;
  width: min(100% - 2rem, 1100px);
  aspect-ratio: 16 / 9;
  overflow: hidden;
  border-radius: 1rem;
  background: #000;
  touch-action: none;
}

/* Dono images same position pe */
.before-after__image {
  position: absolute;
  inset: 0;
}

.before-after__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* LEFT (Before) full visible */
.before-after__image.before {
  z-index: 1;
}

/* RIGHT (After) clip with variable */
.before-after__image.after {
  z-index: 2;
  clip-path: polygon(var(--position) 0, 100% 0, 100% 100%, var(--position) 100%);
}

/* Overlay line in center */
.before-after__inner::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: var(--position);
  width: 2px;
  background: transparent;
  z-index: 3;
  transform: translateX(-50%);
}

/* Custom tag split-cursor as handle */
.before-after__cursor {
  position: absolute;
  top: 50%;
  left: var(--position);
  transform: translate(-50%, -50%);
  z-index: 4;
  width: 56px;
  height: 56px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #ffffff;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  cursor: ew-resize;
}

.before-after__cursor svg {
  width: 24px;
  height: 24px;
}
.before-after__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  white-space: nowrap;
  border: 0;
}

.before-after__inner {
  position: relative;
  max-width: 1100px;
  width: min(100% - 2rem, 1100px);
  aspect-ratio: 16 / 9;
  overflow: hidden;
  border-radius: 1rem;
  background: #000;
  touch-action: none;      /* âœ… mobile scroll vs drag conflict fix */
}

</style>

<script>
  (function () {
    const baSection = document.querySelector(".before-after");
    if (!baSection) return;

    const container = baSection.querySelector(".before-after__inner");

    let isDragging = false;

    function updatePosition(clientX) {
      const rect = container.getBoundingClientRect();
      let x = ((clientX - rect.left) / rect.width) * 100;
      x = Math.max(0, Math.min(100, x));   // 0â€“100%
      container.style.setProperty("--position", x + "%");
    }

    // ðŸ–±ï¸ Mouse events
    container.addEventListener("mousedown", (e) => {
      isDragging = true;
      updatePosition(e.clientX);
    });

    window.addEventListener("mousemove", (e) => {
      if (!isDragging) return;
      updatePosition(e.clientX);
    });

    window.addEventListener("mouseup", () => {
      isDragging = false;
    });

    // ðŸ“± Touch events (mobile)
    container.addEventListener("touchstart", (e) => {
      isDragging = true;
      const touch = e.touches[0];
      updatePosition(touch.clientX);
    }, { passive: false });

    container.addEventListener("touchmove", (e) => {
      if (!isDragging) return;
      const touch = e.touches[0];
      updatePosition(touch.clientX);
      e.preventDefault();   // stop page scroll while dragging
    }, { passive: false });

    window.addEventListener("touchend", () => {
      isDragging = false;
    });
  })();
</script>
